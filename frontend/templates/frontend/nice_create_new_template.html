{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Curriculum Questionnaire - Curriculab</title>
  <style>
    /* Basic reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background-color: #f9f9f9;
    }

    nav {
      display: flex;
      justify-content: space-between;
      padding: 20px;
      background-color: #333;
      color: white;
    }

    .logo {
      display: flex;
      align-items: center;
    }

    .logo-text {
      font-size: 24px;
      color: white;
      text-decoration: none;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 20px;
    }

    nav ul li a {
      color: white;
      text-decoration: none;
      font-size: 18px;
    }

    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 0 20px;
      flex: 1;
    }

    .questionnaire-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .questionnaire-header h1 {
      font-size: 32px;
      color: #333;
      margin-bottom: 10px;
    }

    .questionnaire-header p {
      font-size: 18px;
      color: #666;
    }

    .questionnaire-progress {
      margin-bottom: 30px;
    }

    .progress-bar {
      height: 10px;
      background-color: #e0e0e0;
      border-radius: 5px;
      margin-top: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background-color: #04AA6D;
      width: 0%;
      transition: width 0.5s ease;
    }

    .questionnaire-section {
      background-color: white;
      border-radius: 8px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .questionnaire-section h2 {
      font-size: 24px;
      margin-bottom: 20px;
      color: #333;
      border-bottom: 2px solid #04AA6D;
      padding-bottom: 10px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #555;
    }

    .form-control {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    .form-control:focus {
      border-color: #04AA6D;
      outline: none;
    }

    .text-area {
      min-height: 100px;
      resize: vertical;
    }

    .form-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .btn-back {
      background-color: #f4f4f4;
      color: #333;
    }

    .btn-back:hover {
      background-color: #e0e0e0;
    }

    .btn-next, .btn-submit {
      background-color: #04AA6D;
      color: white;
    }

    .btn-next:hover, .btn-submit:hover {
      background-color: #028a5e;
    }

    .section-body {
      display: none;
    }

    .active {
      display: block;
    }

    .experience-entry, .education-entry, .skill-entry {
      background-color: #f9f9f9;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 15px;
      position: relative;
    }

    .remove-entry {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #ff5252;
      color: white;
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .add-entry {
      background-color: #04AA6D;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 8px 16px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
    }

    .add-entry:hover {
      background-color: #028a5e;
    }

    .template-options {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .template-option {
      border: 2px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      transition: all 0.3s;
      width: 200px;
      text-align: center;
    }

    .template-option img {
      width: 100%;
      height: auto;
      border-radius: 4px;
      margin-bottom: 10px;
    }

    .template-option.selected {
      border-color: #04AA6D;
      background-color: rgba(4, 170, 109, 0.1);
    }

    /* Footer */
    footer {
      background-color: #333;
      color: white;
      padding: 40px 20px 20px;
      text-align: center;
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      max-width: 1200px;
      margin: 0 auto;
      gap: 30px;
    }

    .footer-section {
      flex: 1;
      min-width: 250px;
      text-align: left;
      margin-bottom: 20px;
    }

    .footer-section h4 {
      font-size: 22px;
      margin-bottom: 15px;
      position: relative;
      padding-bottom: 10px;
    }

    .footer-section h4::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 50px;
      height: 2px;
      background-color: #04AA6D;
    }

    .footer-section p {
      font-size: 16px;
      line-height: 1.5;
      margin-bottom: 10px;
    }

    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .footer-links a {
      color: #f4f4f4;
      text-decoration: none;
      transition: color 0.3s ease;
      font-size: 16px;
    }

    .footer-links a:hover {
      color: #04AA6D;
      text-decoration: underline;
    }

    .social-icons {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }

    .social-icon {
      color: white;
      text-decoration: none;
      font-size: 16px;
      transition: color 0.3s ease;
      padding: 8px 0;
    }

    .social-icon:hover {
      color: #04AA6D;
    }

    .copyright {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      nav {
        flex-direction: column;
        align-items: center;
      }

      nav ul {
        margin-top: 15px;
      }

      .form-buttons {
        flex-direction: column;
        gap: 10px;
      }

      .btn {
        width: 100%;
      }
      
      .template-option {
        width: 100%;
      }

      .footer-content {
        flex-direction: column;
        align-items: center;
      }

      .footer-section {
        width: 100%;
        text-align: center;
      }

      .footer-section h4::after {
        left: 50%;
        transform: translateX(-50%);
      }

      .footer-links {
        align-items: center;
      }

      .social-icons {
        justify-content: center;
      }
    }
  </style>
</head>
<body>

  <!-- Navigation Bar -->
  <nav>
    <div>
      <a href="{% url 'nice_home' %}" class="logo-text">Curriculab</a>
    </div>
    <ul>
      <li><a href="{% url 'nice_home' %}">Home</a></li>
      <li><a href="{% url 'logout' %}">Logout</a></li>
    </ul>
  </nav>

  <div class="container">
    <div class="questionnaire-header">
      <h1>Create Your Professional Curriculum</h1>
      <p>Answer the questions below to build your personalized resume</p>
    </div>

    <div class="questionnaire-progress">
      <div class="progress-text">Step <span id="current-step">1</span> of <span id="total-steps">5</span></div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
    </div>

    <form id="curriculum-form" action="{% url 'nice_create_new_template' %}" method="POST">
      {% csrf_token %}
      <!-- Personal Information Section -->
      <div class="questionnaire-section" id="section-1">
        <h2>Personal Information</h2>
        <div class="section-body active">
          <div class="form-group">
            <label for="full-name">Full Name</label>
            <input type="text" id="full-name" name="full_name" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="job-title">Professional Title</label>
            <input type="text" id="job-title" name="job_title" class="form-control" placeholder="e.g., Software Engineer, Marketing Specialist">
          </div>
          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="text" id="email" name="email" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" class="form-control">
          </div>
          <div class="form-group">
            <label for="location">Location</label>
            <input type="text" id="location" name="location" class="form-control" placeholder="City, State/Province, Country">
          </div>
          <div class="form-group">
            <label for="linkedin">LinkedIn Profile (Optional)</label>
            <input type="text" id="linkedin" name="linkedin" class="form-control" placeholder="https://linkedin.com/in/yourprofile">
          </div>
          <div class="form-group">
            <label for="website">Personal Website/Portfolio (Optional)</label>
            <input type="text" id="website" name="website" class="form-control" placeholder="https://yourwebsite.com">
          </div>
          <div class="form-group">
            <label for="summary">Professional Summary</label>
            <textarea id="summary" name="summary" class="form-control text-area" placeholder="Write a brief summary of your professional background and career goals"></textarea>
          </div>
          <div class="form-buttons">
            <button type="button" class="btn btn-next" onclick="nextSection(1)">Next: Work Experience</button>
          </div>
        </div>
      </div>

      <!-- Work Experience Section -->
      <div class="questionnaire-section" id="section-2">
        <h2>Work Experience</h2>
        <div class="section-body">
          <div id="experience-container">
            <div class="experience-entry">
              <button type="button" class="remove-entry" onclick="removeEntry(this)">×</button>
              <div class="form-group">
                <label for="job-title-1">Job Title</label>
                <input type="text" id="job-title-1" name="job_title_1" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="company-1">Company Name</label>
                <input type="text" id="company-1" name="company_1" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="job-location-1">Location</label>
                <input type="text" id="job-location-1" name="job_location_1" class="form-control" placeholder="City, State/Province, Country">
              </div>
              <div class="form-group">
                <label for="job-start-date-1">Start Date</label>
                <input type="month" id="job-start-date-1" name="job_start_date_1" class="form-control">
              </div>
              <div class="form-group">
                <label for="job-end-date-1">End Date</label>
                <input type="month" id="job-end-date-1" name="job_end_date_1" class="form-control">
              </div>
              <div class="form-group">
                <label>
                  <input type="checkbox" id="current-job-1" name="current_job_1"> I currently work here
                </label>
              </div>
              <div class="form-group">
                <label for="job-description-1">Description of Responsibilities and Achievements</label>
                <textarea id="job-description-1" name="job_description_1" class="form-control text-area" placeholder="Describe your key responsibilities, achievements, and relevant skills"></textarea>
              </div>
            </div>
          </div>
          <button type="button" class="add-entry" onclick="addExperienceEntry()">Add Another Experience</button>
          <div class="form-buttons">
            <button type="button" class="btn btn-back" onclick="previousSection(2)">Back: Personal Information</button>
            <button type="button" class="btn btn-next" onclick="nextSection(2)">Next: Education</button>
          </div>
        </div>
      </div>

      <!-- Education Section -->
      <div class="questionnaire-section" id="section-3">
        <h2>Education</h2>
        <div class="section-body">
          <div id="education-container">
            <div class="education-entry">
              <button type="button" class="remove-entry" onclick="removeEntry(this)">×</button>
              <div class="form-group">
                <label for="degree-1">Degree/Certificate</label>
                <input type="text" id="degree-1" name="degree_1" class="form-control" placeholder="e.g., Bachelor of Science in Computer Science">
              </div>
              <div class="form-group">
                <label for="institution-1">Institution Name</label>
                <input type="text" id="institution-1" name="institution_1" class="form-control">
              </div>
              <div class="form-group">
                <label for="edu-location-1">Location</label>
                <input type="text" id="edu-location-1" name="edu_location_1" class="form-control" placeholder="City, State/Province, Country">
              </div>
              <div class="form-group">
                <label for="edu-start-date-1">Start Date</label>
                <input type="month" id="edu-start-date-1" name="edu_start_date_1" class="form-control">
              </div>
              <div class="form-group">
                <label for="edu-end-date-1">End Date (or Expected)</label>
                <input type="month" id="edu-end-date-1" name="edu_end_date_1" class="form-control">
              </div>
              <div class="form-group">
                <label for="edu-description-1">Additional Details (Optional)</label>
                <textarea id="edu-description-1" name="edu_description_1" class="form-control text-area" placeholder="GPA, relevant coursework, honors, awards, etc."></textarea>
              </div>
            </div>
          </div>
          <button type="button" class="add-entry" onclick="addEducationEntry()">Add Another Education</button>
          <div class="form-buttons">
            <button type="button" class="btn btn-back" onclick="previousSection(3)">Back: Work Experience</button>
            <button type="button" class="btn btn-next" onclick="nextSection(3)">Next: Skills</button>
          </div>
        </div>
      </div>

      <!-- Skills Section -->
      <div class="questionnaire-section" id="section-4">
        <h2>Skills & Certifications</h2>
        <div class="section-body">
          <div id="skills-container">
            <div class="skill-entry">
              <button type="button" class="remove-entry" onclick="removeEntry(this)">×</button>
              <div class="form-group">
                <label for="skill-category-1">Skill Category</label>
                <input type="text" id="skill-category-1" name="skill_category_1" class="form-control" placeholder="e.g., Technical Skills, Language Skills, Soft Skills">
              </div>
              <div class="form-group">
                <label for="skills-list-1">Skills (comma separated)</label>
                <input type="text" id="skills-list-1" name="skills_list_1" class="form-control" placeholder="e.g., JavaScript, React, Node.js">
              </div>
            </div>
          </div>
          <button type="button" class="add-entry" onclick="addSkillEntry()">Add Another Skill Category</button>
          
          <div class="form-group" style="margin-top: 30px;">
            <label for="certifications">Certifications (Optional)</label>
            <textarea id="certifications" name="certifications" class="form-control text-area" placeholder="List any relevant certifications, including name, issuing organization, and date"></textarea>
          </div>
          
          <div class="form-group">
            <label for="languages">Languages (Optional)</label>
            <textarea id="languages" name="languages" class="form-control text-area" placeholder="List languages and proficiency levels"></textarea>
          </div>
          
          <div class="form-buttons">
            <button type="button" class="btn btn-back" onclick="previousSection(4)">Back: Education</button>
            <button type="button" class="btn btn-next" onclick="nextSection(4)">Next: Template Selection</button>
          </div>
        </div>
      </div>

      <!-- Template Selection Section -->
      <div class="questionnaire-section" id="section-5">
        <h2>Choose Your Template</h2>
        <div class="section-body">
          <p>Select a template that best represents your professional style:</p>
          
          <div class="template-options">
            <div class="template-option" onclick="selectTemplate(this, 'modern')">
              <img src="{% static 'images/cv1.webp' %}" alt="Modern Template">
              <h3>Modern</h3>
              <p>Clean, contemporary design with a touch of color</p>
            </div>
            <div class="template-option" onclick="selectTemplate(this, 'classic')">
              <img src="{% static 'images/cv2.webp' %}" alt="Classic Template">
              <h3>Classic</h3>
              <p>Traditional, professional layout for standard industries</p>
            </div>
            <div class="template-option" onclick="selectTemplate(this, 'creative')">
              <img src="{% static 'images/cv3.webp' %}" alt="Creative Template">
              <h3>Creative</h3>
              <p>Unique design for creative professionals</p>
            </div>
          </div>
          
          <input type="hidden" id="selected-template" name="template" value="">
          
          <div class="form-buttons">
            <button type="button" class="btn btn-back" onclick="previousSection(5)">Back: Skills</button>
            <button type="submit" class="btn btn-submit">Generate My Curriculum</button>
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- Footer Section -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h4>Curriculab</h4>
        <p>Your trusted platform to create a professional curriculum quickly and easily.</p>
      </div>
      <div class="footer-section">
        <h4>Links</h4>
        <div class="footer-links">
          <a href="#">About Us</a>
          <a href="#">Contact</a>
          <a href="#">Privacy Policy</a>
        </div>
      </div>
      <div class="footer-section">
        <h4>Follow Us</h4>
        <div class="social-icons">
          <a href="#" class="social-icon">Facebook</a>
          <a href="#" class="social-icon">Twitter</a>
          <a href="#" class="social-icon">Instagram</a>
        </div>
      </div>
    </div>
    <div class="copyright">
      <p>&copy; 2025 Curriculab. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Current section tracking
    let currentSection = 1;
    const totalSections = 5;
    
    // Update progress bar
    function updateProgress() {
      const progressPercentage = ((currentSection - 1) / (totalSections - 1)) * 100;
      document.getElementById('current-step').textContent = currentSection;
      document.getElementById('progress-fill').style.width = progressPercentage + '%';
    }
    
    // Navigate to next section
    function nextSection(sectionNum) {
      // Hide current section
      document.querySelector(`#section-${sectionNum} .section-body`).classList.remove('active');
      // Show next section
      currentSection = sectionNum + 1;
      document.querySelector(`#section-${currentSection} .section-body`).classList.add('active');
      // Update progress
      updateProgress();
      // Scroll to top of the form
      window.scrollTo({
        top: document.querySelector('.questionnaire-header').offsetTop,
        behavior: 'smooth'
      });
    }
    
    // Navigate to previous section
    function previousSection(sectionNum) {
      // Hide current section
      document.querySelector(`#section-${sectionNum} .section-body`).classList.remove('active');
      // Show previous section
      currentSection = sectionNum - 1;
      document.querySelector(`#section-${currentSection} .section-body`).classList.add('active');
      // Update progress
      updateProgress();
      // Scroll to top of the form
      window.scrollTo({
        top: document.querySelector('.questionnaire-header').offsetTop,
        behavior: 'smooth'
      });
    }
    
    // Add new work experience entry
    function addExperienceEntry() {
      const container = document.getElementById('experience-container');
      const entryCount = container.children.length + 1;
      
      const newEntry = document.createElement('div');
      newEntry.className = 'experience-entry';
      newEntry.innerHTML = `
        <button type="button" class="remove-entry" onclick="removeEntry(this)">×</button>
        <div class="form-group">
          <label for="job-title-${entryCount}">Job Title</label>
          <input type="text" id="job-title-${entryCount}" name="job_title_${entryCount}" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="company-${entryCount}">Company Name</label>
          <input type="text" id="company-${entryCount}" name="company_${entryCount}" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="job-location-${entryCount}">Location</label>
          <input type="text" id="job-location-${entryCount}" name="job_location_${entryCount}" class="form-control" placeholder="City, State/Province, Country">
        </div>
        <div class="form-group">
          <label for="job-start-date-${entryCount}">Start Date</label>
          <input type="month" id="job-start-date-${entryCount}" name="job_start_date_${entryCount}" class="form-control">
        </div>
        <div class="form-group">
          <label for="job-end-date-${entryCount}">End Date</label>
          <input type="month" id="job-end-date-${entryCount}" name="job_end_date_${entryCount}" class="form-control">
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="current-job-${entryCount}" name="current_job_${entryCount}"> I currently work here
          </label>
        </div>
        <div class="form-group">
          <label for="job-description-${entryCount}">Description of Responsibilities and Achievements</label>
          <textarea id="job-description-${entryCount}" name="job_description_${entryCount}" class="form-control text-area" placeholder="Describe your key responsibilities, achievements, and relevant skills"></textarea>
        </div>
      `;
      
      container.appendChild(newEntry);
    }
    
    // Add new education entry
    function addEducationEntry() {
      const container = document.getElementById('education-container');
      const entryCount = container.children.length + 1;
      
      const newEntry = document.createElement('div');
      newEntry.className = 'education-entry';
      newEntry.innerHTML = `
        <button type="button" class="remove-entry" onclick="removeEntry(this)">×</button>
        <div class="form-group">
          <label for="degree-${entryCount}">Degree/Certificate</label>
          <input type="text" id="degree-${entryCount}" name="degree_${entryCount}" class="form-control" placeholder="e.g., Bachelor of Science in Computer Science">
        </div>
        <div class="form-group">
          <label for="institution-${entryCount}">Institution Name</label>
          <input type="text" id="institution-${entryCount}" name="institution_${entryCount}" class="form-control">
        </div>
        <div class="form-group">
          <label for="edu-location-${entryCount}">Location</label>
          <input type="text" id="edu-location-${entryCount}" name="edu_location_${entryCount}" class="form-control" placeholder="City, State/Province, Country">
        </div>
        <div class="form-group">
          <label for="edu-start-date-${entryCount}">Start Date</label>
          <input type="month" id="edu-start-date-${entryCount}" name="edu_start_date_${entryCount}" class="form-control">
        </div>
        <div class="form-group">
          <label for="edu-end-date-${entryCount}">End Date (or Expected)</label>
          <input type="month" id="edu-end-date-${entryCount}" name="edu_end_date_${entryCount}" class="form-control">
        </div>
        <div class="form-group">
          <label for="edu-description-${entryCount}">Additional Details (Optional)</label>
          <textarea id="edu-description-${entryCount}" name="edu_description_${entryCount}" class="form-control text-area" placeholder="GPA, relevant coursework, honors, awards, etc."></textarea>
        </div>
      `;
      
      container.appendChild(newEntry);
    }
    
    // Add new skill entry
    function addSkillEntry() {
      const container = document.getElementById('skills-container');
      const entryCount = container.children.length + 1;
      
      const newEntry = document.createElement('div');
      newEntry.className = 'skill-entry';
      newEntry.innerHTML = `
        <button type="button" class="remove-entry" onclick="removeEntry(this)">×</button>
        <div class="form-group">
          <label for="skill-category-${entryCount}">Skill Category</label>
          <input type="text" id="skill-category-${entryCount}" name="skill_category_${entryCount}" class="form-control" placeholder="e.g., Technical Skills, Language Skills, Soft Skills">
        </div>
        <div class="form-group">
          <label for="skills-list-${entryCount}">Skills (comma separated)</label>
          <input type="text" id="skills-list-${entryCount}" name="skills_list_${entryCount}" class="form-control" placeholder="e.g., JavaScript, React, Node.js">
        </div>
      `;
      
      container.appendChild(newEntry);
    }
    
    // Remove an entry
    function removeEntry(button) {
      const entry = button.parentElement;
      const container = entry.parentElement;
      
      // Only remove if there's more than one entry
      if (container.children.length > 1) {
        container.removeChild(entry);
      } else {
        alert("You must have at least one entry in this section.");
      }
    }
    
    // Select template
    function selectTemplate(element, templateId) {
      // Remove selected class from all templates
      const templates = document.querySelectorAll('.template-option');
      templates.forEach(template => template.classList.remove('selected'));
      
      // Add selected class to clicked template
      element.classList.add('selected');
      
      // Set hidden input value
      document.getElementById('selected-template').value = templateId;
    }
    
    // Handle form submission
    document.getElementById('curriculum-form').addEventListener('submit', function(e) {
      // Validate form first
      if (!validateForm()) {
        e.preventDefault();
        return;
      }
      // If validation passes, let the form submit naturally
    });
    
    // Form validation
    function validateForm() {
      // Basic validation example
      const fullName = document.getElementById('full-name').value;
      const email = document.getElementById('email').value;
      const selectedTemplate = document.getElementById('selected-template').value;
      
      if (!fullName) {
        alert("Please enter your full name.");
        return false;
      }
      
      if (!email) {
        alert("Please enter your email address.");
        return false;
      }
      
      if (!selectedTemplate) {
        alert("Please select a template.");
        return false;
      }
      
      return true;
    }
    
    // Initialize the form
    window.onload = function() {
      updateProgress();
    };
  </script>
</body>
</html>